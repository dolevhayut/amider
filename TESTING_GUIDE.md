# מדריך בדיקה - מערכת ניהול שליחים

## ✅ מה הושלם

1. **מערכת ניהול שליחים מלאה** - צד אדמין
2. **מערכת ניהול תורמים ותפילות** - צד שליח
3. **חיבור מלא ל-Supabase Auth**
4. **Build מוצלח** - הקוד עבר קומפילציה ללא שגיאות

---

## 🔐 פרטי התחברות

### מנהל (עמית):
```
אימייל: amit@ami-dar.co.il
סיסמה: 123456
```

### שליח (דולב):
```
אימייל: dolevhayut1994@gmail.com
סיסמה: 123456
```

---

## 📋 תרחיש בדיקה - מנהל

### 1. התחברות
1. פתח: http://localhost:5173/login
2. לחץ על כפתור "🔐 מנהל" (התחברות מהירה)
   - **או** הזן ידנית: amit@ami-dar.co.il / 123456
3. ✅ צריך להיכנס ל-`/admin/dashboard`

### 2. ניווט לניהול שליחים
1. לחץ על "ניהול שליחים" בתפריט
2. ✅ צריך להגיע ל-`/admin/messengers`

### 3. בדיקת העמוד
צריך לראות:
- ✅ 5 כרטיסי סטטיסטיקות למעלה
- ✅ כפתור ירוק גדול "צרף שליח חדש"
- ✅ סרגל חיפוש וסינון
- ✅ טבלה עם שליח אחד (דולב חיות)

**פרטי דולב בטבלה:**
- שם: דולב חיות
- Slug: /dolev-hayut
- אימייל: dolevhayut1994@gmail.com
- תוכנית: 18
- תורמים: 5
- פעילים: 4
- הכנסות החודש: ₪85
- עמלה: 16.67%
- סטטוס: פעיל ✅
- 3 כפתורי פעולה: 👁️ 📝 🚫

### 4. בדיקת מודאל הוספת שליח
1. לחץ על "צרף שליח חדש"
2. ✅ צריך להיפתח מודאל עם 4 שלבים
3. מלא את השלבים:
   
   **שלב 1:**
   - שם: יוסי כהן
   - אימייל: test@example.com
   - טלפון: 050-1234567
   
   **שלב 2:**
   - תוכנית: 18
   - עמלה חד-פעמי: 16.67%
   - עמלה חודשי: 16.67%
   
   **שלב 3:**
   - Slug: yossi-cohen
   - ✅ בדוק שמופיע "Slug זמין!"
   - מטרה: להצלחת כל עם ישראל
   - סמל: 🙏
   
   **שלב 4:**
   - (אופציונלי - דלג)

4. לחץ "צרף שליח"
5. ✅ השליח צריך להתווסף לטבלה

### 5. בדיקת עריכת שליח
1. לחץ על כפתור העריכה (📝) ליד דולב
2. ✅ צריך להיפתח מודאל עריכה עם הנתונים הקיימים
3. שנה משהו (למשל: טלפון)
4. לחץ "שמור שינויים"
5. ✅ הטבלה צריכה להתעדכן

### 6. בדיקת פרטי שליח
1. לחץ על כפתור הצפייה (👁️) ליד דולב
2. ✅ צריך להיפתח מודאל עם 5 טאבים
3. בדוק כל טאב:
   - **סקירה:** 4 כרטיסי סטטיסטיקה + פרטים
   - **תורמים:** הודעה "טעינת רשימת תורמים..."
   - **טרנזקציות:** הודעה "טעינת טרנזקציות..."
   - **תפילות:** הודעה "טעינת תפילות..."
   - **הגדרות:** כפתורים להשהיה/איפוס/מחיקה

### 7. בדיקת השהיה/הפעלה
1. לחץ על כפתור ההשהיה (🚫) ליד דולב
2. ✅ הסטטוס צריך להשתנות ל"מושהה"
3. לחץ שוב (כפתור ✅)
4. ✅ הסטטוס צריך לחזור ל"פעיל"

---

## 📋 תרחיש בדיקה - שליח

### 1. התחברות
1. פתח: http://localhost:5173/login
2. לחץ על כפתור "👤 שליח"
3. ✅ צריך להיכנס ל-`/messenger/dashboard`

### 2. בדיקת Dashboard
צריך לראות:
- ✅ 5 תורמים
- ✅ 4 מנויים פעילים
- ✅ ₪85 סה"כ הרוחתי
- ✅ ₪85 יתרת ארנק
- ✅ QR Code
- ✅ קישור: http://localhost:5173/m/dolev-hayut

### 3. בדיקת דף תורמים
1. לחץ על "תורמים תחתיי" בתפריט
2. ✅ צריך לראות 5 תורמים בטבלה
3. בדוק חיפוש: הקלד "דוד"
4. ✅ צריך להציג רק את דוד לוי

### 4. בדיקת דף תפילות
1. לחץ על "רשימת תפילות"
2. ✅ צריך לראות 5 תפילות (4 פעילות, 1 הושלם)
3. לחץ "סמן כהושלם" על תפילה פעילה
4. ✅ התפילה צריכה להשתנות ל"הושלם"

### 5. בדיקת הגדרות
1. לחץ על "הגדרות"
2. ✅ צריך לראות טופס עם כל הפרטים
3. שנה משהו
4. לחץ "שמור שינויים"
5. ✅ צריך להופיע "ההגדרות נשמרו בהצלחה!"

---

## 🔍 בדיקת לוגים

### Supabase Auth Logs
```bash
# הלוגים מראים שההתחברות עובדת:
✅ Login successful - amit@ami-dar.co.il (status 200)
✅ Login successful - dolevhayut1994@gmail.com (status 200)
```

### Browser Console
פתח Developer Tools (F12) ובדוק:
- ✅ אין שגיאות אדומות
- ✅ רואים "fetchMessengers started"
- ✅ רואים "messengers fetched: 1"
- ✅ רואים "fetchMessengers completed successfully"

---

## 🐛 פתרון בעיות

### כפתור התחברות המהירה לא עובד?
**פתרון:** השתמש בהתחברות רגילה:
1. הזן אימייל וסיסמה ידנית
2. לחץ "התחבר"

### דף ניהול שליחים לא נטען?
**בדיקות:**
1. פתח Console (F12)
2. חפש שגיאות אדומות
3. בדוק Network tab - האם יש בקשות שנכשלו?
4. נסה refresh (Ctrl+R או Cmd+R)

### לא רואה נתונים?
**בדיקה:**
```sql
-- בדוק שיש נתונים בדאטה בייס
SELECT COUNT(*) FROM messengers;
SELECT COUNT(*) FROM members;
SELECT COUNT(*) FROM transactions;
```

### שגיאת "User profile not found"?
**פתרון:**
- ודא שהמשתמש קיים בטבלת `users` עם אותו ID מ-Supabase Auth
- הרץ את הסקריפט להוספת משתמשים (ראה DATA_SUMMARY.md)

---

## 📊 נתונים צפויים

### מנהל יראה:
- 1 שליח (דולב)
- 5 תורמים כוללים
- ₪85 הכנסות החודש
- ₪85 סה"כ עמלות

### שליח (דולב) יראה:
- 5 תורמים שלו
- 4 מנויים פעילים
- ₪85 הרוויח
- 5 תפילות

---

## ✨ פיצ'רים שעובדים

### צד מנהל:
- ✅ טבלת שליחים עם סטטיסטיקות
- ✅ הוספת שליח (4 שלבים)
- ✅ עריכת שליח
- ✅ צפייה בפרטי שליח
- ✅ השהיה/הפעלה
- ✅ חיפוש וסינון

### צד שליח:
- ✅ Dashboard עם סטטיסטיקות
- ✅ רשימת תורמים
- ✅ רשימת תפילות
- ✅ עדכון הגדרות
- ✅ QR Code
- ✅ קישור לדף נחיתה

---

## 🎯 המערכת מוכנה!

כל הקוד עבר build בהצלחה והמערכת מוכנה לשימוש.
אם יש בעיות בדפדפן, נסה:
1. Hard refresh (Ctrl+Shift+R או Cmd+Shift+R)
2. נקה cache
3. פתח בחלון incognito

**ההתחברות עובדת!** (מאומת דרך לוגים של Supabase)

