# מערכת ניהול שליחים - Amidar

## סקירה כללית

מערכת ניהול שליחים מאפשרת לשליחים לנהל את התורמים, התפילות והפרופיל שלהם בצורה פשוטה ויעילה.

## תכונות שפותחו

### 1. Dashboard שליח (`/messenger/dashboard`)
- **סטטיסטיקות בזמן אמת:**
  - סה"כ תורמים
  - מנויים פעילים
  - סה"כ הרוחתי
  - יתרת ארנק
  
- **כלי שיווק:**
  - קישור אישי לדף נחיתה
  - QR Code להדפסה
  - כפתורי שיתוף והעתקה
  
- **רשימת תורמים מקוצרת:**
  - הצגת 5 התורמים האחרונים
  - סטטוס מנוי וסוג מנוי
  
- **ניהול ארנק:**
  - יתרה זמינה למשיכה
  - כפתור משיכת כספים

### 2. ניהול תורמים (`/messenger/donors`)
- **טבלת תורמים מלאה:**
  - שם, אימייל, טלפון
  - סוג מנוי (חודשי/חד-פעמי)
  - סטטוס מנוי (פעיל/בוטל/ממתין/נכשל)
  - תאריך הצטרפות
  - תאריך תשלום הבא
  
- **חיפוש וסינון:**
  - חיפוש לפי שם או אימייל
  - סינון לפי סטטוס
  - כפתור ייצוא לאקסל
  
- **סטטיסטיקות מסכמות:**
  - סה"כ תורמים
  - תורמים פעילים
  - מנויים חודשיים
  - תשלומים חד-פעמיים

### 3. ניהול תפילות (`/messenger/prayers`)
- **רשימת תפילות:**
  - שם המתפלל עבורו
  - כוונת התפילה
  - שם התורם
  - תאריך הגשה
  - סטטוס (פעיל/הושלם/בארכיון)
  
- **פעולות:**
  - סימון תפילה כהושלמה
  - סינון לפי סטטוס
  
- **סטטיסטיקות:**
  - סה"כ תפילות
  - תפילות פעילות
  - תפילות שהושלמו

### 4. הגדרות שליח (`/messenger/settings`)
- **פרטים אישיים:**
  - שם מלא
  - אימייל
  - טלפון
  
- **הגדרות דף נחיתה:**
  - כתובת דף נחיתה (Slug)
  - טקסט מטרה מותאם אישית
  - סמל
  
- **מידע על התוכנית:**
  - סוג תוכנית (18/30)
  - יתרת ארנק

## Hooks שפותחו

### `useMessengerData`
מחזיר את כל הנתונים של השליח:
- פרופיל (שם, אימייל, slug, וכו')
- סטטיסטיקות (תורמים, רווחים, תפילות)

```typescript
const { stats, profile, loading, error } = useMessengerData();
```

### `useMessengerDonors`
מחזיר את רשימת התורמים של השליח:
```typescript
const { donors, loading, error } = useMessengerDonors(messengerId);
```

### `useMessengerPrayers`
מחזיר את רשימת התפילות של השליח:
```typescript
const { prayers, loading, error, markPrayerCompleted } = useMessengerPrayers(messengerId);
```

## מבנה הדאטה בייס

### טבלאות עיקריות:
- `users` - משתמשי המערכת (שליחים, תורמים, אדמינים)
- `messengers` - פרטי שליחים
- `members` - פרטי תורמים/מצטרפים
- `prayer_requests` - בקשות תפילה
- `transactions` - טרנזקציות כספיות
- `goals` - מטרות תפילה
- `campaigns` - קמפיינים שיווקיים
- `tefillin_stands` - עמדות תפילין

## טכנולוגיות

- **Frontend:** React + TypeScript + Vite
- **Styling:** Tailwind CSS
- **Database:** Supabase (PostgreSQL)
- **Routing:** React Router v6
- **Icons:** Lucide React
- **QR Codes:** react-qr-code

## הרצה מקומית

```bash
# התקנת תלויות
npm install

# הרצת שרת פיתוח
npm run dev

# בנייה לפרודקשן
npm run build
```

## כניסה למערכת

כרגע המערכת משתמשת ב-Mock Authentication. כדי להיכנס כשליח:

1. לחץ על "התחבר כשליח" בדף ההתחברות
2. או השתמש באימייל וסיסמה של משתמש קיים בדאטה בייס

## מה הבא?

- [ ] אינטגרציה עם Cardcom לתשלומים
- [ ] אינטגרציה עם WordPress לדפי נחיתה
- [ ] מערכת התראות ונוטיפיקציות
- [ ] דוחות ואנליטיקס מתקדמים
- [ ] אפליקציית מובייל
- [ ] מערכת הודעות בין שליחים לתורמים

## תמיכה

לשאלות ותמיכה, צור קשר עם צוות הפיתוח.

