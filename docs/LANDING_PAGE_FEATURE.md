# פיצ'ר דף נחיתה לשליחים ✅

## סיכום

נוצר פיצ'ר מלא של דפי נחיתה אישיים לכל שליח, כולל מערכת ניהול תוכן באדמין ועמוד תרומה מינימלי ומרגש.

---

## מה נוצר

### 1. מבנה מסד נתונים 🗄️

**טבלה: `landing_page_content`**
- תוכן דף נחיתה לכל שליח
- שדות:
  - **הירו סקשן**: כותרת, כותרת משנה, תיאור, תמונה
  - **כפתורי CTA**: טקסט ראשי ומשני
  - **אודות**: כותרת ותוכן
  - **השפעה**: כותרת ומערך נקודות השפעה
  - **עיצוב**: צבע ראשי, סגנון רקע (בהיר/כהה/גרדיאנט)
  - **SEO**: meta title ו-description
- **RLS Policies**:
  - ציבור יכול לקרוא (לצפייה בדף)
  - אדמין יכול לערוך הכל
  - שליח יכול לצפות בשלו (לעתיד כשיאפשרו עריכה)
- נוצר תוכן ברירת מחדל לכל השליחים הקיימים

### 2. Types 📝

**`src/types/index.ts`**
- `LandingPageContent` - מבנה תוכן דף הנחיתה
- `ImpactItem` - נקודת השפעה בודדת
- `Testimonial` - המלצה (לעתיד)
- `CustomSection` - סקשן מותאם (לעתיד)
- `UpdateLandingPageContent` - עדכון תוכן
- `MessengerLandingPageData` - נתוני שליח + תוכן

### 3. Hooks 🪝

**`src/hooks/useLandingPage.ts`**

#### `useLandingPage(slug: string)`
לשימוש בדפים הציבוריים - טוען את נתוני השליח ותוכן הדף לפי slug
```typescript
const { data, loading, error, refetch } = useLandingPage('your-slug');
```

#### `useAdminLandingPage(messengerId: string)`
לשימוש באדמין - טוען ומעדכן תוכן דף הנחיתה
```typescript
const { content, loading, error, updateContent, refetch } = useAdminLandingPage(messengerId);
```

### 4. קומפוננטות 🎨

#### דפים ציבוריים

**`src/pages/public/LandingPage.tsx`**
- דף נחיתה מלא עם:
  - הירו סקשן מרשים
  - כפתורי קריאה לפעולה
  - סקשן אודות
  - סקשן השפעה עם כרטיסים
  - CTA סופי
  - תמיכה בצבעים מותאמים אישית
  - תמיכה ב-3 סגנונות רקע (בהיר/כהה/גרדיאנט)

**`src/pages/public/DonatePage.tsx`**
- עמוד תרומה מינימלי ומרגש:
  - בחירת סוג תרומה (חד-פעמי/חודשי)
  - סכומים מוגדרים מראש (18, 36, 54, 100, 180, 360)
  - אפשרות להזין סכום מותאם
  - סיכום חזותי של הסכום
  - אייקוני אבטחה ואמון
  - כפתור חזרה לדף הראשי

#### קומפוננטות אדמין

**`src/components/admin/EditLandingPageModal.tsx`**
- מודל עריכה עם 4 טאבים:
  1. **הירו סקשן** - כותרת, תיאור, כפתורי CTA
  2. **אודות** - כותרת ותוכן
  3. **השפעה** - כותרת + ניהול נקודות השפעה (הוספה/עריכה/מחיקה)
  4. **עיצוב** - בחירת צבע ראשי וסגנון רקע
- כפתור תצוגה מקדימה
- שמירה מהירה

### 5. ראוטינג 🛣️

**`src/App.tsx`**
```typescript
// דפים ציבוריים
<Route path="/m/:slug" element={<LandingPage />} />
<Route path="/m/:slug/donate" element={<DonatePage />} />
```

### 6. ניהול באדמין 👨‍💼

**`src/pages/admin/Messengers.tsx`**
- נוסף כפתור "ערוך דף נחיתה" (אייקון גלובוס כחול) בטבלת השליחים
- הכפתור פותח את `EditLandingPageModal`

---

## איך להשתמש

### כאדמין - ניהול תוכן דף נחיתה

1. היכנס לדשבורד האדמין
2. לך ל-"ניהול שליחים"
3. בטבלה, לחץ על כפתור הגלובוס (🌐) ליד שליח
4. ערוך את התוכן בטאבים השונים:
   - **הירו**: הכותרת והתיאור הראשיים
   - **אודות**: תוכן "מי אני"
   - **השפעה**: נקודות על ההשפעה של התרומה
   - **עיצוב**: צבעים וסגנון
5. לחץ "שמור שינויים"
6. לחץ "תצוגה מקדימה" לראות את התוצאה

### כמשתמש - צפייה בדף נחיתה

1. גש ל: `https://ami-dar.co.il/m/[slug-של-השליח]`
2. דוגמה: `https://ami-dar.co.il/m/rabbi-david`
3. הדף יציג את כל התוכן שהאדמין הגדיר
4. לחץ "תרמו עכשיו" למעבר לעמוד התרומה

### עמוד תרומה

1. בחר סוג תרומה (חד-פעמי / חודשי)
2. בחר סכום או הזן סכום מותאם אישית
3. לחץ על הכפתור הגדול לביצוע התרומה
4. **שים לב**: כרגע זה מדפיס alert - צריך לחבר לשער תשלום

---

## מבנה הקבצים

```
src/
├── types/
│   └── index.ts                    # Types חדשים לדף נחיתה
├── hooks/
│   ├── useLandingPage.ts          # Hooks לטעינה ועדכון תוכן
│   └── index.ts                    # Exports
├── pages/
│   ├── public/
│   │   ├── LandingPage.tsx        # דף נחיתה ציבורי
│   │   └── DonatePage.tsx         # עמוד תרומה
│   └── admin/
│       └── Messengers.tsx          # עודכן עם כפתור עריכה
├── components/
│   └── admin/
│       └── EditLandingPageModal.tsx # מודל עריכת תוכן
└── App.tsx                          # עודכן עם routes חדשים
```

---

## פיצ'רים עתידיים 🚀

### קרוב
- [ ] חיבור לשער תשלום (Cardcom/Tranzilla)
- [ ] העלאת תמונות ל-Supabase Storage
- [ ] אנימציות מרשימות יותר
- [ ] SEO optimization
- [ ] Open Graph tags לשיתוף ברשתות חברתיות

### רחוק יותר
- [ ] מעקב אחר המרות (Analytics)
- [ ] A/B testing של דפי נחיתה
- [ ] המלצות מתורמים (Testimonials)
- [ ] גלריית תמונות
- [ ] סרטוני וידאו
- [ ] שליח יוכל לערוך את הדף שלו (כרגע רק אדמין)
- [ ] תבניות עיצוב מוכנות

---

## הערות חשובות ⚠️

1. **תוכן ברירת מחדל**: כל שליח מקבל תוכן ברירת מחדל אוטומטית כשנוצר דף הנחיתה
2. **RLS**: הדפים ציבוריים ואין צורך באימות לצפייה
3. **עריכה**: כרגע רק אדמין יכול לערוך תוכן (בעתיד גם שליחים)
4. **תשלומים**: עמוד התרומה מוכן מבחינת UI אבל צריך חיבור לשער תשלום
5. **תמונות**: כרגע אין אפשרות להעלות תמונות (מתוכנן ל-Supabase Storage)
6. **צבעים**: כל שליח יכול לקבל צבע ראשי שונה לדף שלו
7. **מובייל**: הכל responsive ומותאם למובייל

---

## דוגמאות שימוש

### דוגמה 1: יצירת תוכן בסיסי

```typescript
// באדמין
await updateContent({
  hero_title: 'תמיכה בתפילות וישועות',
  hero_description: 'הצטרפו למעגל התורמים שלי',
  cta_primary_text: 'תרמו עכשיו',
  theme_color: '#10b981', // ירוק
  background_style: 'gradient'
});
```

### דוגמה 2: הוספת נקודות השפעה

```typescript
await updateContent({
  impact_items: [
    {
      icon: '🙏',
      title: 'תפילות בכותל',
      description: 'כל תרומה מממנת תפילה בכותל המערבי'
    },
    {
      icon: '📖',
      title: 'לימוד תורה',
      description: 'תמיכה בלימוד תורה יומי'
    },
    {
      icon: '💝',
      title: 'צדקה לנזקקים',
      description: 'עזרה לאלפי משפחות נזקקות'
    }
  ]
});
```

---

## טכנולוגיות

- **React** + **TypeScript**
- **React Router** לראוטינג
- **Supabase** למסד נתונים וRLS
- **Tailwind CSS** לעיצוב
- **Lucide Icons** לאייקונים

---

## בדיקות

### לבדוק ידנית:

1. ✅ דף נחיתה נטען עם תוכן ברירת מחדל
2. ✅ עמוד תרומה עובד ומציג סכומים
3. ✅ אדמין יכול לערוך תוכן
4. ✅ שינויים נשמרים ומתעדכנים מיד
5. ✅ כפתור "תצוגה מקדימה" עובד
6. ✅ Responsive על מובייל
7. ✅ צבעים מותאמים אישית עובדים
8. ✅ סגנונות רקע שונים עובדים

### URLs לבדיקה:

```
# דף נחיתה
http://localhost:5173/m/[slug-of-messenger]

# עמוד תרומה
http://localhost:5173/m/[slug-of-messenger]/donate

# ניהול באדמין
http://localhost:5173/admin/messengers
```

---

## סיום

הפיצ'ר מוכן ומלא! כל שליח יכול עכשיו לקבל דף נחיתה אישי ומעוצב, והאדמין יכול לנהל את התוכן בקלות.

השלב הבא: עיצוב מתקדם יותר + חיבור לשער תשלום 💳

