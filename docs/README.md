# עמידר - מערכת ניהול תורמים ותפילות

מערכת CRM מתקדמת לניהול שליחים, מצטרפים ובקשות תפילה עם מנגנון אפיליאציה מובנה.

## תיאור המערכת

עמידר היא מערכת CRM המחברת בין **שליחים** (messengers) למצטרפים (members) למען תפילות יומיות ותמיכה בצדקה. השליחים מגייסים מצטרפים דרך לינקים ייחודיים או QR codes המובילים לדפי נחיתה ב-WordPress/Elementor, והמצטרפים מקבלים תפילות יומיות במקומות קדושים.

### עיצוב והתנסות משתמש
- **Mobile-First**: המערכת מותאמת קודם כל למובייל עם תמיכה מלאה במסכים גדולים
- **RTL Hebrew**: תמיכה מלאה בעברית עם כיווניות מימין לשמאל
- **Google Sans Font**: פונט מודרני וקריא המותאם לעברית

### תפקידי משתמשים

- **שליח (Messenger)**: משתמש המגייס מצטרפים ומקבל עמלות על כל מצטרף חדש
- **מצטרף (Member)**: תורם המצטרף דרך שליח ומקבל תפילות יומיות
- **מנהל (Admin)**: מנהל את כל המערכת, הקמפיינים והדוחות

## טכנולוגיות

### Frontend
- **React 18** + **TypeScript**
- **Vite** - Build tool מהיר ומודרני
- **Tailwind CSS** - עיצוב Mobile-First עם תמיכה מלאה ב-RTL
- **Google Sans Font** - פונט מודרני וקריא
- **React Router v6** - ניתוב
- **Lucide React** - אייקונים
- **React Hook Form** - ניהול טפסים
- **React QR Code** - יצירת QR codes המובילים לדפי WordPress
- **Recharts** - גרפים ותרשימים

### Backend
- **Supabase**
  - PostgreSQL Database
  - Real-time subscriptions
  - Authentication (לעתיד)
  - Storage (לעתיד)

## התקנה והרצה

### דרישות מקדימות
- Node.js 18+
- npm או yarn

### התקנה

```bash
# התקן תלויות
npm install

# העתק את קובץ הסביבה
cp .env.example .env.local

# ערוך את .env.local והוסף את פרטי Supabase שלך
```

### הרצה במצב פיתוח

```bash
npm run dev
```

האפליקציה תרוץ ב-`http://localhost:5173`

### בניית Production

```bash
npm run build
```

## מבנה הפרויקט

```
src/
├── components/
│   ├── shared/          # קומפוננטות משותפות (Button, Card, Modal, וכו')
│   ├── messenger/       # קומפוננטות ספציפיות לשליח
│   ├── member/          # קומפוננטות ספציפיות למצטרף
│   └── admin/           # קומפוננטות ספציפיות למנהל
├── contexts/
│   └── AuthContext.tsx  # ניהול התחברות ומשתמש נוכחי
├── hooks/               # Custom hooks
├── layouts/
│   └── DashboardLayout.tsx  # Layout לדשבורדים (mobile-first)
├── lib/
│   └── supabase.ts      # הגדרת Supabase client
├── pages/
│   ├── auth/            # התחברות (עמוד כניסה למערכת)
│   ├── messenger/       # דשבורד שליח
│   ├── member/          # דשבורד מצטרף
│   └── admin/           # דשבורד מנהל
├── types/
│   ├── database.types.ts    # טייפים שנוצרו מ-Supabase
│   └── index.ts             # טייפים נוספים
├── App.tsx              # Router ראשי
└── main.tsx            # Entry point

**הערה**: דפי הנחיתה לכל שליח מתבצעים דרך WordPress/Elementor חיצוני. ה-QR codes והלינקים מפנים לשם.
```

## מאפיינים עיקריים

### דשבורד שליח
- סטטיסטיקות: סה"כ מצטרפים, מנויים פעילים, הכנסות, יתרת ארנק
- רשימת מצטרפים עם פרטי מנוי וסטטוס
- כלי שיווק: 
  - לינק אישי לדף WordPress/Elementor
  - QR code להדפסה המוביל לדף הנחיתה החיצוני
  - אפשרויות שיתוף
- ניהול ארנק ומשיכת כספים
- רשימת תפילות של המצטרפים
- **ניווט תחתון במובייל** עם אייקונים מהירים

### דשבורד מצטרף
- מידע על המנוי וסטטוס
- היסטוריית תשלומים
- הגשת בקשות תפילה חדשות
- צפייה בתפילות קיימות
- אפשרות לשדרוג לשליח (רכישת עמדת תפילין)
- ביטול מנוי עם סרטון שימור

### דשבורד מנהל
- סקירה כללית: סטטיסטיקות על כל המערכת
- ניהול שליחים: רשימה, סינון, צפייה בפרטים
- ניהול מצטרפים: רשימה, סינון, היסטוריה
- מערכת תפילות: צפייה בכל התפילות, ייצוא
- ניהול קמפיינים (UI בלבד)
- דוחות ו-KPIs

## סכמת Database

### טבלאות ראשיות

#### users
משתמשי המערכת (שליחים, מצטרפים, מנהלים)

#### messengers
פרטי שליחים: מסלול תשלום, מטרה, QR code, יתרת ארנק

#### members
פרטי מצטרפים: סוג מנוי, שליח משויך, סטטוס תשלום

#### prayer_requests
בקשות תפילה: שם למתפלל, מטרת התפילה, סטטוס

#### transactions
תנועות פיננסיות: תשלומים, עמלות, משיכות

#### goals
מטרות תפילה אפשריות (רפואה, שידוך, פרנסה וכו')

#### tefillin_stands
רכישות עמדות תפילין והמרה לשליח

#### campaigns
קמפיינים שיווקיים למשלוח למשתמשים

## התחברות מהירה לפיתוח

בעמוד ההתחברות (`/login`) ישנם כפתורים להתחברות מהירה:
- **כניסה כשליח** - גישה לדשבורד שליח
- **כניסה כמצטרף** - גישה לדשבורד מצטרף
- **כניסה כמנהל** - גישה לדשבורד מנהל

## מאפיינים שיתווספו בעתיד

- [ ] אינטגרציה עם שער תשלומים (Tranzila/Cardcom)
- [ ] אוטומציה של WhatsApp (Green API)
- [ ] Cron jobs לחיובים חוזרים
- [ ] אימיילים אוטומטיים
- [ ] העלאת קבצים ל-Supabase Storage
- [ ] חישוב תאריכים עבריים (hebcal)
- [ ] יצירת PDF לרשימות תפילה
- [ ] התראות SMS
- [ ] מערכת דוחות מתקדמת

## תרומה לפרויקט

הפרויקט פתוח לתרומות! אנא פתח issue או pull request.

## רישיון

© 2024 עמידר - כל הזכויות שמורות

## יצירת קשר

לשאלות ותמיכה: [your-email@example.com]

---

Built with ❤️ using React, TypeScript, Tailwind CSS, and Supabase
